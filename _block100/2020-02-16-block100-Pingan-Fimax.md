---
layout: post
title:  "系统：平安壹账链"
author: jane
image: block100/images/fimaxs3-feature.png
categories: [ Block100 ]
tags: 
order_number: 1
description: Bucharest’s  its consolidation as the national capital of Romania late in the 19th century. First mentioned as the “Citadel of București” in 1459, it became the residence of the famous Wallachian prince Vlad III the Impaler. # Add post description (optional)
---
场景类别：金融科技，供应链金融

平安集团旗下的金融壹帐通在2018年2月6日推出”壹帐链“<sup>1</sup>，这一联盟链（BaaS平台）充分考虑行业应用场景的需要，有众多独特的设计，如采用3D零知识证明算法的全加密框架。

采用字段级的全加密及零知识证明应用，是考虑到现实商业的实际需求。”在实际的商业项目落地时，数据共享往往是非常困难的，没有机构愿意主动共享数据。因此，必须借助有效的数据隐私保护方案，实现数据在可控范围内的共享或者挖掘利用数据在密文情形下共享的价值，以打消参与机构的顾虑。“

它还从智能合约的角度指出这一需求，”智能合约运行依赖全部的明文上链数据，而参与机构很少愿意共享全部的明文数据，这将导致智能合约在联盟链的应用中受到很大限制。“

从区块链的应用价值的角度，它强调三点：

> -  打造分布式商业生态
> -  消除信息不对称
> -  增强数据可信度

它现在涵盖了五个行业生态：金融、汽车、医疗、智慧城市、房产。

## 壹帐链底层技术FiMax与服务BNaaS

壹帐链包括两大组成部分：第一大部分是FiMAX区块链技术平台（FiMAX S3C），第二大部分是它的区块链服务平台，它名为 BNaaS（Blockchain-Network-as-a-Service, 区块链网络即服务平台）。

### FiMAX区块链技术平台

FiMAX四个功能模块分别是(S3C由FiMAX四个功能模块首字母组成)：

- Sparrow：区块链解决方案模块
- Core：区块链内核模块
- Cathaya：区块链隐私保护模块
- Concord：区块链网络管理模块

![FiMAX](/block100/images/fimaxs3carchitecture.png)
FiMAX总体架构(2020年2月获取)

考虑到中国的应用场景，FiMAX对国密算法进行了很好的支持。

其中，FiMAX Core模块基于Hyperledger Fabric进行了深度优化和改进，但仍保留良好的兼容性。此功能支持在同一区块链网络中同时部署FiMAX Core节点与Fabric Peer节点。

这个技术框架的主要特点是Cathaya区块链隐私保护模块，其中有两个要点：

### 1. 字段级加密+授权解密

这一区块链上的数据存储与共享，通过“字段级加密+授权解密”实现。

出于数据安全及隐私保护的考虑，它采用了全加密模式，即所有信息均由数据拥有方自行通过自己的密钥加密后上传至区块链。

在没有密钥的情况下，任何参与方、节点仅能获得无法解读的加密信息。

只有在获得数据所有方解密授权的情况下，其他参与方才可解密并读取数据。

数据拥有方可实现精准到字段级别、分对象的授权管理，使得其他参与方仅能看到需要看到的数据，并且可实现权限的收回等操作。

此技术保证数据拥有方可根据自己的意愿来决定哪个参与方在什么时候能看到或修改哪个字段的数据，在不泄露其它信息的情况下实现精准的数据分享，数据所有方对自有数据拥有完全的所有权和掌控权，而无数据隐私之忧。

![FiMAX](/block100/images/fimaxs3-encrypt.png)

### 2. 3D零知识证明

基于3D零知识证明，可以实现跨账本的密文数据的各类数据关系证明。

基于此技术，可以实现复杂业务逻辑下的多数据源交叉验证，确保数据在流转过程中的合法合规性问题，使得多种业务场景在区块链上应用成为可能。

下图以贸易融资场景中的发票和物流为例，借助3D零知识账本，可以使参与方在无需看到明文数据的情况下验证数据的正确性。

发票账本下包含发票金额和货物单价两个数据，物流账本下包含货物数量信息，为保护用户的隐私，这三项数据均以密文的形式存储在区块链上。

任何参与方都可以做数据的交叉匹配验证来检测贸易的真实性（例如：发票金额=货物数量x单价）。

![FiMAX](/block100/images/fimaxs3-3dzk.png)

### 区块链网络即服务平台

与传统BaaS（Blockchain-as-a-Service）平台由一个账户体系产生链并产生节点不同，BNaaS (Blockchain-Network-as-a-Service)强调多账户体系组网。

用户能自主创建并发布新的区块链网络。用户也可以通过Market Place 加入已有的商业区块链网络。

我们可以看到，基于壹帐链BNaaS，它形成每一个业务都是一个独立的商业区块链网络，目前它展示的案例有：

- IFAB区块链智慧贸易融资网络
- 天津口岸区块链验证试点项目
- 香港金管局国际贸易融资网络
- ALFA智能ABS平台
- 福田汽车ALL-Link（汽车供应链金融）
- 智慧环保平台（环境数据上链）

### 有争议的创新：无区块架构

FiMAX区块链框架的一个有争议的创新是：无区块架构。

它的一个设计是：平安区块链在延续超级账本1.1的并发框架下大胆采用“无区块”架构，所有单笔交易均实时处理。这种架构同时支持较高的交易吞吐量以及较低的交易延迟，从根本上解决了吞吐量和延迟问题的取舍难题。

它提出了所谓”智能区块“，通过在区块链底层架构层面进行重构和改进，实现实时反馈交易响应的机制。

它的区块链账本管理，是通过不同节点对账本的共同记录与维护，形成区块链系统中数据的公共管理、防篡改、可溯源的机制。


## 跨境贸易区块链应用场景

在金融壹帐通《跨境贸易区块链白皮书》（2019.2）中，它详细阐述了区块链在跨境贸易中的应用场景。

它的整体设计是，以各业务参与方及其之间的业务关系为基础，同时叠加上区块链的分布式账本，以展示区块链技术在信息的传递、信任的建立、流程的协同等方面所能带来的帮助。

![FiMAX](/block100/images/fimaxs3-trade.png)

它提供了一个设想性跨境贸易案例如下<sup>2</sup>：

![FiMAX](/block100/images/fimaxs3-trade-example.png)

### 基于一笔假设业务的案例说明
下文描述了一笔基于区块链通关的完整业务过程，介绍了奶粉如何从德国出口至中国。案例中的商业主体名称均为虚构，不代表任何真实组织。
1. 奶粉生产商Milchpulver GmbH是一家在德国注册登记的企业。
2. Milchpulver与中国奶粉进口商天津放心奶粉经谈判达成一项贸易协议，该进口公司注册于天津市工商行政管理局。Milchpulver 将上述贸易协议的电子信息基于数据标准体系写入至国际跨境贸易区块链网络账本(以下类似信息写入过程简称为“信息上链”，写入的方式可以是企业通过其使用的系统直接写入该国际性账本，也可以是通过区域性账本以跨账本的方式将数据“融入”上层的国际性账本)，同时授权给天津放心奶粉(写入账本的信息默认为已加密的信息，仅数据所有人和被授权的主体方能解密读取明文信息)，并由天津放心奶粉完成电子签名，在区块链上完成存证，以防任何一方进行篡改。
3. Milchpulver于2018年10月20日生产了一个批次的奶粉，总计1000罐。Milchpulver向德国IHK商会申请并获取了原产地认证。IHK商会将该原产地认证的电子信息完成上链，并授权给Milchpulver有限公司。IHK商会在国际跨境贸易区块链网络中拥有由国际认证公司所签发的CA证书，任何被授权查询的实体均可通过验签明确该份原产地证明的官方属性。
4. 天津放心奶粉于2018年10月21日向Milchpulver下达了采购订单，意欲订购上述批次的奶粉。天津放心奶粉将该订单的电子信息完成上链，并授权给Milchpulver有限公司。
5. Milchpulver基于该采购订单在其企业内部ERP系统中制作了销售订单，并完成发运，继而制作了商业发票和装箱单。Milchpul-ver将发票和装箱单信息完成上链，并将其连同原产地证明一并授权至货运代理商捷运物流。
6. 捷运物流基于商业发票和装箱单信息完成了订舱等一系列的物流安排，并制作了提运单，捷运物流将提运单信息上链后授权给 Milchpulver。
7. Milchpulver向保险公司投保了货物运输险，并获取了保单信息的授权。
8. 天津放心奶粉从Milchpulver处获得全套电子贸易单证的授权，并转而授权至天津海关及货运代理服务商速通物流。
9. 捷运物流基于被授权的发票、装箱单、原产地证明以及自有的提运单信息自动生成了一份出口报关单并通过德国海关申报系统完成申报，同时将上述所有单证的电子信息授权给德国海关。
10. 德国海关基于电子随附单证对该笔出口申报完成了审核，放行了该笔业务。
11. 跨境承运人更新启程状态后，触发区块链网络中的智能合约，智能合约基于速通物流所获取的全套贸易单证电子信息，自动生成了一份进口报关单，同时通知速通物流货物当前的物流状态并提示其做好进口申报的准备。
12. 速通物流通过单一窗口完成进口申报后，天津海关的自动审核程序根据电子随附单证的信息对进口报关单中的信息完成了多维度的交叉验证，确认了该笔业务的贸易真实性并将其判定为低风险业务，最终给出预清关的处理意见。
13. 货物抵港并完成理货操作后，迅速完成通关。
14. 天津放心奶粉将全套贸易电子单证连同天津海关授权的通关证明一并授权至中国银行并提出贸易付款的融资申请。中国银行调用预设的零知识证明程序在区块链网络中证实了天津放心奶粉尚未基于该笔贸易业务通过其他银行获取过贸易融资服务(其他银行出于商业利益保护的原则不会向中国银行透露任何客户及相关金融业务的信息)，同时行内的风控系统基于上述完备的贸易信息对该笔融资申请给出了低风险的评级结果，最终中国银行以非常优惠的条件快速发放了该笔贸易融资款项。


参考资料：
1. https://baas.yizhangtong.com/
2. [金融壹帐通《跨境贸易区块链白皮书》（2019.2，中文版）](https://baas.yizhangtong.com/statics/share/_%E8%B7%A8%E5%A2%83%E8%B4%B8%E6%98%93%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E6%A0%87%E5%87%86.pdf)

### 资料：有缺陷的隐私保护方案

为了解决数据隐私保护问题，市场上出现了众多的解决方案。然而，部分解决方案存在明显的技术缺陷。

**有缺陷的方案1：哈希上链**

“哈希上链”是指原始数据不上链而只有原始数据对应的Hash值上链。该方案被市场上的区块链系统大量采用。然而该方案存在巨大的安全隐患：由于计算Hash速度很快，如果其他参与方掌握了一个被Hash上链的原始数据范围，便能够轻易通过碰撞等方法“猜出”hash对应的原始数据，从而导致数据泄露。以某银行的联盟链项目为例，该项目中，将“客户地址”数据计算Hash后将Hash值存储在链上。然而中国的“客户地址”数据可以被有限穷举，一个低配笔记本电脑就可以在一个小时内对10亿个地址进行Hash后碰撞得出国内用户地址明文。尽管如此，目前市场却仍在广泛使用该存在严重安全漏洞的方案，并被很多IT供应商作为解决方案推广。

**有缺陷的方案2：分链**

“分链”是指基于同一条物理的区块链，在各个参与方之间，建立两两相连的分链。分链的最大问题在于将区块链当做点对点连接（P2P）的系统，这也是一种被大量采用却没有实际解决问题的方案。分链在某种程度上实现了不同参与方的数据隔离，但却同时造成了新的数据孤岛。此外，当参与机构数量比较多时，为了实现数据隔离需要创建数量巨大的分链。对于数量巨大的分链，用户需要耗费巨大的维护工作量以及高昂的硬件费用。例如欧盟的贸易融资平台We.Trade，该平台为14个参与方建立了共计105条分链，各参与方需要耗费巨大的工作量来创建并维护这些分链。

**有缺陷的方案3：可信计算**

“可信计算”相对前两类方案而言，未被广泛采用。其问题在于“可信计算”本身是一个中心，用户必须相信可信计算解决方案提供方。由于可信计算密钥至少部分由该供应商提供，用户一旦使用就很难脱离可信计算提供方。Intel SGX是具有代表性的可信计算方案，在银行等机构推广了多年但并不成功。究其根本原因，银行等机构一旦使用此方案就会被服务提供商绑定，除非服务提供商交出密钥等加密信息。然而，一旦服务提供商交出秘钥等加密信息，可信计算本身将变成“玻璃墙”。 

### 资料：区块链真正价值

（1）区块链应用价值争议

市场上认为区块链没有价值的人不在少数。的确，目前市场上绝大多数区块链项目相比传统技术方案非但没有任何优势，反而增加许多成本和运营风险。而互联网上提及最多的几个区块链价值点，并没有太大的实际意义：

-  数据不可篡改

“数据不可篡改”不是区块链技术的创造。在区块链技术产生30年前，数字签名技术就已经解决了数据不可篡改的问题。对于可能发生的数字签名丢失问题，也可通过将签名数据存储在多个云计算中心或者非云数据中心解决。因此，区块链技术可以实现“数据不可篡改”，但“数据不可篡改”不是区块链的真正应用价值。

- 数据可追溯

同上述问题类似，“数据可追溯”同样不是区块链的创造。在区块链技术产生之前，可以通过例如“数据库+时间戳”的方式记录所有交易，进而实现数据的可追溯。如有需要，也可在数据库中采用哈希来串联（或index）数据。因此，“数据可追溯”也不是区块链的真正应用价值。

-  智能合约提升效率

“智能合约”由于允许交易对手之间自动执行数字化形式的合约，因此被称为能够提升业务效率。许多项目也都宣称通过智能合约技术实现了效率提升。然而，绝大部分项目业务效率的提升并非来自数据的上链以及“智能合约”自动执行，而是来自于将线下的业务进行线上化，将传统的纸质流程数字化。在业务流程已经数字化的前提下，中心化系统的解决方案比“智能合约”的方案更富有效率也更加成熟。此外，尤其是在金融等关键领域，“智能合约”由于其本身技术成熟度不够可能会带来潜在的风险。因此，“智能合约提升效率”同样不是区块链的真正应用价值。

- 数据共享

区块链由于链接了多个参与方，因此被认为是实现“数据共享”的工具。然而“数据共享”并不仅仅是工具层面的问题。真实的商业环境中，要求各方主动共享数据几乎是不可能的事情。“共享数据”的挑战主要来自两方面：一是商业机构对于隐私泄露的担忧，导致没有商业机构愿意主动共享己方的数据。二是监管政策对于数据隐私的保护。因此，如果没有有效的数据隐私保护方案，“数据共享”在商业环境下只能是一种美好的愿望。至少在目前看来，“数据共享”只适合于扶贫、公益等此类需要社会公众共同监督而无需担心数据隐私泄露的区块链项目。

（2）区块链真正应用价值

一个真正有价值的区块链应用不应该只有一个参与方或者一个平台。因为一个平台所能实现的功能，中心化系统都可以实现。因此，真正有价值的区块链应用一定是多方参与或者链接多个平台。在多方参与的前提下，我们分析得到区块链真正的应用价值点：

-  打造分布式商业生态

区块链去中心化的特点并非是消除中心，而是通过削弱中心效应以创建一个分布式的商业生态体系。“分布式商业”是一种由多个具有对等地位的商业利益共同体建立的新兴生产关系，是通过预设的透明规则进行组织管理、职能分工、价值交换、共同提供商品与服务并分享收益的新型经济活动行为。区块链技术由于其分布式自治、多参与方共识的特点与“分布式商业”的形态完美契合，将助力打造分布式商业生态。

-  消除信息不对称

区块链网络上，所有参与方看到或者更新的均为同一份数据，即分布式账本。由于不同参与方的数据保持一致，因此不存在信息不对称或者因信息不对称造成的数据不匹配的问题。数据一致性有助于提升业务流程的标准化程度并显著提升业务效率。在很多场景中，数据一致性还能够规避一些由于信息不对称导致的欺诈风险。例如贸易融资的场景中，由于消除了商业银行和融资企业的信息不对称问题，可以有效避免重复融资或者骗贷等行为的出现。

-  增强数据可信度

为数据增信一般有两种方法。一种方法是引入例如公证处、监管机构等强信任主体，使强信任主体为数据背书。另外一种方法是引入尽可能多的与此数据相关的参与方，使不同参与方的数据相互进行交叉验证；交叉验证通过即可证明数据可信度较高。可信数据将有助于加速业务流程并规避可能的风险。无论是上述哪一种方法，区块链由于其分布式特性，都可以作为实现可信数据的基础技术设施。

 